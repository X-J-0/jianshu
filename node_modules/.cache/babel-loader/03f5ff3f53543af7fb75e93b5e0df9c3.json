{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\86183\\\\Desktop\\\\notebook\\\\react\\\\jianshu\\\\src\\\\common\\\\header\\\\index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { SearchInfoList, SearchInfoItem, SearchInfoSwitch, SearchInfoTitle, SearchInfo, HeaderWrapper, Logo, Nav, NavItem, NavSearch, Addition, Button, SearchWrapper } from './style';\nimport { Globalstyle } from '../../statics/iconfont/iconfont.js';\nimport { CSSTransition } from 'react-transition-group';\nimport { actionCreators } from './store';\nimport { actionCreators as loginActionCreators } from '../../pages/login/store';\n\nclass Header extends Component {\n  getListArea() {\n    const {\n      page,\n      totalPage,\n      handleChangePage\n    } = this.props;\n    const jsList = this.props.list.toJS();\n    const pageList = [];\n\n    if (jsList.length) {\n      for (let i = (page - 1) * 10; i < page * 10; i++) {\n        pageList.push( /*#__PURE__*/React.createElement(SearchInfoItem, {\n          key: jsList[i],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 17,\n            columnNumber: 17\n          }\n        }, jsList[i]));\n      }\n    }\n\n    if (this.props.focused || this.props.mouseIn) {\n      return /*#__PURE__*/React.createElement(SearchInfo, {\n        onMouseEnter: this.props.handleMouseEnter,\n        onMouseLeave: this.props.handleMouseLeave,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(SearchInfoTitle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 17\n        }\n      }, \"\\u70ED\\u95E8\\u641C\\u7D22\", /*#__PURE__*/React.createElement(SearchInfoSwitch, {\n        onClick: () => handleChangePage(totalPage, page, this.spinIcon),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 22\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        ref: icon => {\n          this.spinIcon = icon;\n        },\n        className: \"iconfont spin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 26\n        }\n      }, \"\\uE851\"), \"\\u6362\\u4E00\\u6279\")), /*#__PURE__*/React.createElement(SearchInfoList, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 17\n        }\n      }, pageList));\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(HeaderWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Logo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(NavItem, {\n      className: \"left active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 8\n      }\n    }, \"\\u9996\\u9875\"), /*#__PURE__*/React.createElement(NavItem, {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 8\n      }\n    }, \"\\u4E0B\\u8F7D\"), this.props.login ? /*#__PURE__*/React.createElement(NavItem, {\n      onClick: this.props.logout,\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 12\n      }\n    }, \"\\u9000\\u51FA\") : /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(NavItem, {\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 31\n      }\n    }, \"\\u767B\\u5F55\")), /*#__PURE__*/React.createElement(NavItem, {\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(Globalstyle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconfont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 8\n      }\n    }, \"\\uE636\")), /*#__PURE__*/React.createElement(SearchWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(CSSTransition, {\n      in: this.props.focused,\n      timeout: 200,\n      classNames: \"slide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(NavSearch, {\n      className: this.props.focused ? 'focused' : '',\n      onFocus: () => this.props.handleInputFocus(this.props.list),\n      onBlur: this.props.handleInputBlur,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 8\n      }\n    })), /*#__PURE__*/React.createElement(Globalstyle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: this.props.focused ? 'focused iconfont zoom' : 'iconfont zoom',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 8\n      }\n    }, \"\\uE6E4\"), this.getListArea())), /*#__PURE__*/React.createElement(Addition, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Globalstyle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Link, {\n      to: \"/write\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"writting\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconfont\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 38\n      }\n    }, \"\\uE61B\"), \"\\u5199\\u6587\\u7AE0\")), /*#__PURE__*/React.createElement(Button, {\n      className: \"reg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, \"\\u6CE8\\u518C\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    focused: state.get('header').get('focused'),\n    list: state.get('header').get('list'),\n    page: state.get('header').get('page'),\n    totalPage: state.getIn(['header', 'totalPage']),\n    mouseIn: state.get('header').get('mouseIn'),\n    login: state.get('login').get('login')\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleInputFocus(list) {\n      if (list.size === 0) {\n        dispatch(actionCreators.getList());\n      }\n\n      dispatch(actionCreators.searchFocus());\n    },\n\n    handleInputBlur() {\n      dispatch(actionCreators.searchBlur());\n    },\n\n    handleMouseEnter() {\n      dispatch(actionCreators.mouseEnter());\n    },\n\n    handleMouseLeave() {\n      dispatch(actionCreators.mouseLeave());\n    },\n\n    handleChangePage(totalPage, page, spin) {\n      let originAngle = spin.style.transform.replace(/[^0-9]/ig, '');\n\n      if (originAngle) {\n        originAngle = parseInt(originAngle, 10);\n      } else {\n        originAngle = 0;\n      }\n\n      spin.style.transform = 'rotate(' + (originAngle + 360) + 'deg)';\n\n      if (page < totalPage) {\n        dispatch(actionCreators.changePage(page + 1));\n      } else {\n        dispatch(actionCreators.changePage(1));\n      }\n    },\n\n    logout() {\n      dispatch(loginActionCreators.logout());\n    }\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);","map":{"version":3,"sources":["C:/Users/86183/Desktop/notebook/react/jianshu/src/common/header/index.js"],"names":["React","Component","connect","Link","SearchInfoList","SearchInfoItem","SearchInfoSwitch","SearchInfoTitle","SearchInfo","HeaderWrapper","Logo","Nav","NavItem","NavSearch","Addition","Button","SearchWrapper","Globalstyle","CSSTransition","actionCreators","loginActionCreators","Header","getListArea","page","totalPage","handleChangePage","props","jsList","list","toJS","pageList","length","i","push","focused","mouseIn","handleMouseEnter","handleMouseLeave","spinIcon","icon","render","login","logout","handleInputFocus","handleInputBlur","mapStateToProps","state","get","getIn","mapDispatchToProps","dispatch","size","getList","searchFocus","searchBlur","mouseEnter","mouseLeave","spin","originAngle","style","transform","replace","parseInt","changePage"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport {SearchInfoList,SearchInfoItem, SearchInfoSwitch,SearchInfoTitle,SearchInfo,HeaderWrapper,Logo,Nav,NavItem,NavSearch,Addition,Button,SearchWrapper} from './style';\r\nimport { Globalstyle } from '../../statics/iconfont/iconfont.js';\r\nimport { CSSTransition } from 'react-transition-group';\r\nimport { actionCreators } from './store';\r\nimport { actionCreators as loginActionCreators } from '../../pages/login/store';\r\nclass Header extends Component{\r\n    getListArea(){\r\n        const { page,totalPage,handleChangePage } = this.props;\r\n        const jsList = this.props.list.toJS();\r\n        const pageList = [];\r\n        if(jsList.length){\r\n        for(let i = (page-1) * 10; i<page * 10; i++) {\r\n            pageList.push(\r\n                <SearchInfoItem key={jsList[i]}>{jsList[i]}</SearchInfoItem>\r\n            )\r\n         }\r\n        }\r\n\r\n        if(this.props.focused || this.props.mouseIn){\r\n            return (\r\n                <SearchInfo \r\n                onMouseEnter={this.props.handleMouseEnter}\r\n                onMouseLeave={this.props.handleMouseLeave}\r\n                >\r\n                <SearchInfoTitle>\r\n                     热门搜索\r\n                     <SearchInfoSwitch onClick={() => handleChangePage(totalPage, page,this.spinIcon)}>\r\n                         <span ref={(icon) => {this.spinIcon = icon}} className='iconfont spin'>&#xe851;</span>\r\n                         换一批\r\n                     </SearchInfoSwitch>\r\n                </SearchInfoTitle>\r\n                <SearchInfoList>\r\n                    {pageList}\r\n                </SearchInfoList>\r\n            </SearchInfo>\r\n            )\r\n        }else{\r\n            return null;\r\n        }\r\n    }\r\n    render(){\r\n    return (\r\n    <HeaderWrapper>\r\n    <Link to='/'>\r\n        <Logo/>\r\n    </Link>\r\n    <Nav>\r\n       <NavItem className='left active'>首页</NavItem> \r\n       <NavItem className='left'>下载</NavItem> \r\n       {\r\n           this.props.login ? \r\n           <NavItem onClick={this.props.logout} className='right'>退出</NavItem>  :  \r\n           <Link to ='/login'><NavItem className='right'>登录</NavItem></Link>\r\n       }\r\n       <NavItem className='right'>\r\n       <Globalstyle/>\r\n       <span className=\"iconfont\">&#xe636;</span>\r\n       </NavItem> \r\n       <SearchWrapper>\r\n       <CSSTransition\r\n         in={this.props.focused}\r\n         timeout={200}\r\n         classNames='slide'\r\n       >\r\n       <NavSearch\r\n         className={this.props.focused ? 'focused' : ''}\r\n         onFocus={()=>this.props.handleInputFocus(this.props.list)}\r\n         onBlur={this.props.handleInputBlur}\r\n       ></NavSearch>\r\n       </CSSTransition>\r\n       <Globalstyle/>\r\n       <span className={this.props.focused ? 'focused iconfont zoom' : 'iconfont zoom'}>\r\n           &#xe6e4;\r\n       </span>\r\n       {this.getListArea()}\r\n       </SearchWrapper>\r\n    </Nav>\r\n    <Addition>\r\n        <Globalstyle/>\r\n        <Link to='/write'>\r\n        <Button className='writting'><span className=\"iconfont\">&#xe61b;</span>写文章</Button>\r\n        </Link>\r\n        <Button className='reg'>注册</Button>\r\n    </Addition>\r\n    </HeaderWrapper> \r\n    )\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return{\r\n        focused:state.get('header').get('focused'),\r\n        list:state.get('header').get('list'),\r\n        page:state.get('header').get('page'),\r\n        totalPage:state.getIn(['header','totalPage']),\r\n        mouseIn:state.get('header').get('mouseIn'),\r\n        login:state.get('login').get('login')\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        handleInputFocus(list){\r\n            if(list.size === 0){\r\n            dispatch(actionCreators.getList());\r\n            }\r\n            dispatch(actionCreators.searchFocus());\r\n        },\r\n        handleInputBlur(){\r\n            dispatch(actionCreators.searchBlur());\r\n        },\r\n        handleMouseEnter(){\r\n            dispatch(actionCreators.mouseEnter());\r\n        },\r\n        handleMouseLeave(){\r\n            dispatch(actionCreators.mouseLeave());\r\n        },\r\n        handleChangePage(totalPage, page,spin){\r\n            let originAngle = spin.style.transform.replace(/[^0-9]/ig,'');\r\n            if(originAngle){\r\n                originAngle = parseInt(originAngle,10);\r\n            }else{\r\n                originAngle = 0;\r\n            }\r\n            spin.style.transform = 'rotate(' + (originAngle + 360) + 'deg)';\r\n            if(page<totalPage){\r\n                dispatch(actionCreators.changePage(page + 1));\r\n            }else{\r\n                dispatch(actionCreators.changePage(1));\r\n            }\r\n        },\r\n        logout(){\r\n            dispatch(loginActionCreators.logout())\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Header);\r\n\r\n"]},"metadata":{},"sourceType":"module"}